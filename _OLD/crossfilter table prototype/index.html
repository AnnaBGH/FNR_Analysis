<html>
	<head>
		<script src="lib/underscore-1.5.2-min.js"></script>
		<script src="lib/d3-1309260940-min.js"></script>
		<script src="./index.js"></script>
		<script>

			function reset () {
				document.getElementById('fromDate').value = '2012-01-01';
				document.getElementById('toDate').value = '2012-12-31';
				refilter();
			}

			function refilter() {
				rank({ fromDate: document.getElementById('fromDate').value, toDate: document.getElementById('toDate').value },
					tabulate);
			}

			rank(undefined, function (err) {
				tabulate(sort('Station', true));
			});

		</script>
	</head>
	<body>

		<h1>My data is on fire (stations)
			<!-- free clipart from http://openclipart.org/detail/27554/iso-fire-engine-by-secretlondon -->
			<img src="images/fireEngine.svg" />
		</h1>
		<h2>Crossfilter table prototype</h2>
		<p>
			Click on the columns' headings to sort. Stations highlighted by '*' face closure.
		</p>
		<p>
		From date (YYYY-MM-DD): <input id="fromDate" type="text" value="2012-01-01"><br>
		To date (YYYY-MM-DD): <input id="toDate" type="text" value="2012-12-31"> (careful what you write here, I don't check for the dates' validity or format)<br>
		<input value="Update" type="button" onClick="refilter()">
		<input value="Reset" type="button" onClick="reset()">
		</p>
		<div id="container"></div>

	</body>
</html>
